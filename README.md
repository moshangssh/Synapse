# Synapse: DaVinci Resolve å­—å¹•å¢å¼ºå·¥å…·

Synapse æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œæ—¨åœ¨ç®€åŒ–å’ŒåŠ é€Ÿ DaVinci Resolve (è¾¾èŠ¬å¥‡) ä¸­çš„å­—å¹•ç¼–è¾‘å’Œä¼˜åŒ–å·¥ä½œæµç¨‹ã€‚å®ƒé€šè¿‡ä¸€ä¸ªç°ä»£åŒ–çš„ã€ç±»ä¼¼ VS Code çš„ç•Œé¢ï¼Œå°†å­—å¹•æå–ã€æ‰¹é‡ç¼–è¾‘ã€å£æ°´è¯æ¸…ç†å’Œæ— ç¼å›å¯¼ç­‰åŠŸèƒ½é›†äºä¸€èº«ï¼Œæ˜¯è§†é¢‘å‰ªè¾‘å¸ˆã€åæœŸåˆ¶ä½œäººå‘˜å’Œå­—å¹•åˆ›ä½œè€…çš„å¾—åŠ›åŠ©æ‰‹ã€‚

æœ¬åº”ç”¨é‡‡ç”¨ [Tauri](https://tauri.app/) æ„å»ºï¼Œç»“åˆäº† Reactã€TypeScript çš„ç°ä»£åŒ–å‰ç«¯ä¸ Pythonã€FastAPI çš„å¼ºå¤§åç«¯ï¼Œä»¥ sidecar æ¨¡å¼è¿è¡Œï¼Œç¡®ä¿äº†é«˜æ€§èƒ½å’ŒåŸç”Ÿæ¡Œé¢ä½“éªŒã€‚

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

-   **ä¸ DaVinci Resolve ç›´æ¥é›†æˆ**:
    *   è‡ªåŠ¨è¿æ¥åˆ°æ­£åœ¨è¿è¡Œçš„ DaVinci Resolve å®ä¾‹ã€‚
    *   å®æ—¶è·å–å½“å‰é¡¹ç›®å’Œæ—¶é—´çº¿ä¿¡æ¯ã€‚
    *   ä¸€é”®åŠ è½½æ—¶é—´çº¿ä¸Šæ‰€æœ‰å­—å¹•è½¨é“çš„åˆ—è¡¨ã€‚
    *   ä»æŒ‡å®šè½¨é“ä¸­ç²¾ç¡®æå–æ‰€æœ‰å­—å¹•æ¡ç›®ï¼ŒåŒ…æ‹¬æ—¶é—´ç å’Œæ–‡æœ¬ã€‚

-   **é«˜æ•ˆçš„å­—å¹•ç¼–è¾‘ä½“éªŒ**:
    *   é‡‡ç”¨ **è™šæ‹ŸåŒ–åˆ—è¡¨ (Virtualized List)** æŠ€æœ¯ï¼Œå³ä½¿å¤„ç†åŒ…å«æ•°åƒæ¡å­—å¹•çš„é•¿è§†é¢‘ä¹Ÿèƒ½ä¿æŒç•Œé¢æµç•…ã€‚
    *   åŒå‡»å³å¯ç›´æ¥åœ¨è¡¨æ ¼ä¸­ç¼–è¾‘å­—å¹•æ–‡æœ¬ã€‚
    *   **å·®å¼‚é«˜äº®æ˜¾ç¤º**ï¼šæ‰€æœ‰ä¿®æ”¹éƒ½ä¼šä¸åŸå§‹æ–‡æœ¬è¿›è¡Œå¯¹æ¯”ï¼Œé«˜äº®æ˜¾ç¤ºæ–°å¢å’Œåˆ é™¤çš„å†…å®¹ï¼Œè®©ä¿®æ”¹ç—•è¿¹ä¸€ç›®äº†ç„¶ã€‚
    *   ç‚¹å‡»ä»»æ„å­—å¹•è¡Œï¼Œå¯å°† DaVinci Resolve çš„æ’­æ”¾å¤´**ç²¾ç¡®å®šä½**åˆ°è¯¥å­—å¹•çš„å…¥ç‚¹ã€å‡ºç‚¹æˆ–ä¸­é—´ç‚¹ï¼Œæ–¹ä¾¿æ ¸å¯¹ç”»é¢ã€‚

-   **å¼ºå¤§çš„æ‰¹é‡å¤„ç†èƒ½åŠ›**:
    *   **é«˜çº§æŸ¥æ‰¾ä¸æ›¿æ¢**ï¼šæ”¯æŒå¤§å°å†™åŒ¹é…ã€å…¨è¯åŒ¹é…å’Œæ­£åˆ™è¡¨è¾¾å¼ï¼Œè½»æ¾åº”å¯¹å¤æ‚çš„æ‰¹é‡ä¿®æ”¹éœ€æ±‚ã€‚
    *   **ä¸€é”®ç§»é™¤å£æ°´è¯**ï¼šå†…ç½®å¯å®šåˆ¶çš„å£æ°´è¯è¯å…¸ï¼Œä¸€é”®å³å¯æ¸…ç†å­—å¹•ä¸­çš„â€œå—¯â€ã€â€œå•Šâ€ã€â€œé‚£ä¸ªâ€ã€â€œå°±æ˜¯â€ç­‰å¡«å……è¯ï¼Œå¹¶è‡ªåŠ¨å¤„ç†å¤šä½™çš„æ ‡ç‚¹å’Œç©ºæ ¼ã€‚
    *   **æ’¤é”€æ“ä½œ**ï¼šç§»é™¤ Filler Word åæä¾›æ’¤é”€é€‰é¡¹ï¼Œé˜²æ­¢è¯¯æ“ä½œã€‚

-   **çµæ´»çš„å¯¼å…¥ä¸å¯¼å‡º**:
    *   **å¯¼å…¥ SRT æ–‡ä»¶**ï¼šå¯ä»æœ¬åœ°å¯¼å…¥ `.srt` æ ¼å¼çš„å­—å¹•æ–‡ä»¶è¿›è¡Œç¼–è¾‘å’Œå¤„ç†ã€‚
    *   **å¯¼å‡ºä¸º SRT æ–‡ä»¶**ï¼šå°†ç¼–è¾‘å¥½çš„å­—å¹•å¯¼å‡ºä¸ºæ ‡å‡†çš„ `.srt` æ–‡ä»¶ï¼Œå…¼å®¹å„ç§è§†é¢‘æ’­æ”¾å™¨å’Œå¹³å°ã€‚
    *   **ç›´æ¥å¯¼å‡ºè‡³ DaVinci Resolve**ï¼šå°†ä¿®æ”¹åçš„å­—å¹•ä¸€é”®å›ä¼ åˆ°è¾¾èŠ¬å¥‡ï¼Œåœ¨æ—¶é—´çº¿ä¸Šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„å­—å¹•è½¨é“ï¼Œå®ç°æ— ç¼çš„å·¥ä½œæµç¨‹é—­ç¯ã€‚

-   **ç°ä»£åŒ–çš„ç”¨æˆ·ç•Œé¢**:
    *   å— VS Code å¯å‘çš„å¸ƒå±€ï¼ŒåŒ…å«æ´»åŠ¨æ ã€ä¾§è¾¹æ å’Œä¸»ç¼–è¾‘åŒºï¼Œæ¸…æ™°ç›´è§‚ã€‚
    *   å¯æ‹–æ‹½è°ƒæ•´å®½åº¦çš„ä¾§è¾¹æ ï¼Œé€‚åº”ä¸åŒå·¥ä½œä¹ æƒ¯ã€‚
    *   è¯¦å°½çš„çŠ¶æ€æ ï¼Œå®æ—¶æ˜¾ç¤ºè¿æ¥çŠ¶æ€ã€é¡¹ç›®ä¿¡æ¯ã€å­—å¹•ç»Ÿè®¡å’Œæ’­æ”¾å¤´è·³è½¬æ¨¡å¼ã€‚
    *   åŸç”Ÿçª—å£æ§ä»¶ï¼Œæ”¯æŒçª—å£ç½®é¡¶ã€æœ€å°åŒ–ã€æœ€å¤§åŒ–å’Œå…³é—­ã€‚

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

-   **æ¡Œé¢æ¡†æ¶**: [Tauri](https://tauri.app/) (Rust)
-   **å‰ç«¯**:
    *   [React](https://reactjs.org/)
    *   [TypeScript](https://www.typescriptlang.org/)
    *   [Vite](https://vitejs.dev/)
    *   [Material-UI (MUI)](https://mui.com/)
    *   [Zustand](https://zustand-demo.pmnd.rs/) (çŠ¶æ€ç®¡ç†)
    *   [React Virtuoso](https://virtuoso.dev/) (è™šæ‹Ÿåˆ—è¡¨)
-   **åç«¯ (Sidecar)**:
    *   [Python 3](https://www.python.org/)
    *   [FastAPI](https://fastapi.tiangolo.com/) (æœ¬åœ° API æœåŠ¡å™¨)
    *   [Uvicorn](https://www.uvicorn.org/)
-   **DaVinci Resolve é€šä¿¡**:
    *   Blackmagic Design `DaVinciResolveScript.py` API

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ backend/                  # Python åç«¯ (FastAPI Sidecar)
â”‚   â”œâ”€â”€ davinci_api.py        # å°è£…ä¸ DaVinci Resolve äº¤äº’çš„æ ¸å¿ƒåŠŸèƒ½ (æå–/è®¾ç½®å­—å¹•ã€æ—¶é—´ç ç­‰)
â”‚   â”œâ”€â”€ davinci_connector.py  # å¤„ç†ä¸ Resolve çš„åŠ¨æ€è¿æ¥å’Œä¼šè¯ç®¡ç†
â”‚   â”œâ”€â”€ diagnose_resolve.py   # ç”¨äºè°ƒè¯• Resolve è¿æ¥å’Œå­—å¹•å±æ€§çš„è¯Šæ–­è„šæœ¬
â”‚   â”œâ”€â”€ main.py               # FastAPI åº”ç”¨å…¥å£ï¼Œå®šä¹‰æ‰€æœ‰ API ç«¯ç‚¹
â”‚   â”œâ”€â”€ requirements.txt      # Python ä¾èµ–åˆ—è¡¨ (fastapi, uvicorn, etc.)
â”‚   â”œâ”€â”€ resolve_utils.py      # (å·²éƒ¨åˆ†é‡æ„) åŒ…å«ä¸€äº›æ—©æœŸçš„ Resolve è¾…åŠ©åŠŸèƒ½
â”‚   â”œâ”€â”€ schemas.py            # Pydantic æ•°æ®æ¨¡å‹ï¼Œç”¨äº API è¯·æ±‚/å“åº”çš„éªŒè¯
â”‚   â”œâ”€â”€ srt_utils.py          # SRT æ–‡ä»¶å†…å®¹ç”Ÿæˆå·¥å…·
â”‚   â”œâ”€â”€ timecode_utils.py     # æ—¶é—´ç ä¸å¸§æ•°è½¬æ¢å·¥å…·
â”‚   â”œâ”€â”€ __init__.py           # åŒ…åˆå§‹åŒ–æ–‡ä»¶
â”‚   â””â”€â”€ tests/                # åç«¯å•å…ƒæµ‹è¯•
â”‚       â”œâ”€â”€ test_davinci_api.py
â”‚       â”œâ”€â”€ test_davinci_connector.py
â”‚       â”œâ”€â”€ test_main.py
â”‚       â”œâ”€â”€ test_resolve_utils.py
â”‚       â”œâ”€â”€ test_srt_utils.py
â”‚       â”œâ”€â”€ test_timecode_utils.py
â”‚       â””â”€â”€ __init__.py
â”‚
â”œâ”€â”€ frontend/synapse/         # React å‰ç«¯
â”‚   â”œâ”€â”€ public/               # é™æ€èµ„æº
â”‚   â”‚   â””â”€â”€ filler_words.json # å¯é…ç½®çš„å£æ°´è¯è¯å…¸
â”‚   â”œâ”€â”€ src/                  # å‰ç«¯æºç 
â”‚   â”‚   â”œâ”€â”€ components/       # å¯å¤ç”¨ UI ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ layout/       # å¸ƒå±€ç»„ä»¶ (ä¸»å¸ƒå±€, ä¾§è¾¹æ , çŠ¶æ€æ ç­‰)
â”‚   â”‚   â”‚   â”œâ”€â”€ FillerWordRemover.tsx  # â€œä¸€é”®å»å£æ°´è¯â€åŠŸèƒ½ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ SubtitleTable.tsx      # æ ¸å¿ƒçš„è™šæ‹ŸåŒ–å­—å¹•è¡¨æ ¼ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ FindReplace.tsx        # æŸ¥æ‰¾æ›¿æ¢ UI ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ hooks/            # è‡ªå®šä¹‰ React Hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ useFindReplace.ts      # å°è£…æŸ¥æ‰¾ä¸æ›¿æ¢é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ useSrtImporter.ts      # å°è£… SRT æ–‡ä»¶å¯¼å…¥é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ useNotifier.ts         # å°è£…å…¨å±€é€šçŸ¥é€»è¾‘
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ pages/            # é¡µé¢çº§ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ SubtitleEditorPage.tsx
â”‚   â”‚   â”œâ”€â”€ stores/           # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ useDataStore.ts        # ç®¡ç†å­—å¹•ã€é¡¹ç›®ç­‰æ ¸å¿ƒä¸šåŠ¡æ•°æ®
â”‚   â”‚   â”‚   â”œâ”€â”€ useUIStore.ts          # ç®¡ç†ä¾§è¾¹æ ã€æ´»åŠ¨è§†å›¾ç­‰ UI çŠ¶æ€
â”‚   â”‚   â”‚   â””â”€â”€ useSettingsStore.ts    # ç®¡ç†åº”ç”¨è®¾ç½® (å¦‚å£æ°´è¯åˆ—è¡¨)
â”‚   â”‚   â”œâ”€â”€ utils/            # é€šç”¨å·¥å…·å‡½æ•° (diffè®¡ç®—, srtè§£æ, æ ¼å¼è½¬æ¢ç­‰)
â”‚   â”‚   â”œâ”€â”€ App.tsx           # åº”ç”¨æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.tsx          # åº”ç”¨å…¥å£ç‚¹
â”‚   â”œâ”€â”€ src-tauri/            # Tauri æ ¸å¿ƒ (Rust)
â”‚   â”‚   â”œâ”€â”€ capabilities/     # Tauri æƒé™é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ icons/            # åº”ç”¨å›¾æ ‡èµ„æº
â”‚   â”‚   â”œâ”€â”€ src/              # Rust æºç 
â”‚   â”‚   â”‚   â”œâ”€â”€ lib.rs
â”‚   â”‚   â”‚   â””â”€â”€ main.rs
â”‚   â”‚   â”œâ”€â”€ build.rs          # Rust æ„å»ºè„šæœ¬
â”‚   â”‚   â”œâ”€â”€ Cargo.toml        # Rust ä¾èµ– (crates)
â”‚   â”‚   â””â”€â”€ tauri.conf.json   # Tauri æ ¸å¿ƒé…ç½®ï¼ŒåŒ…æ‹¬ sidecar è®¾ç½®
â”‚   â”œâ”€â”€ package.json          # å‰ç«¯ä¾èµ–å’Œè„šæœ¬ (npm)
â”‚   â””â”€â”€ vite.config.ts        # Vite é…ç½®æ–‡ä»¶
â”‚
â””â”€â”€ ... (å…¶ä»–é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶å¦‚ .gitignore)
```

---

## ğŸš€ å¼€å§‹ä½¿ç”¨

### å…ˆå†³æ¡ä»¶

1.  **DaVinci Resolve**: ç¡®ä¿å·²å®‰è£… DaVinci Resolve æˆ– DaVinci Resolve Studioã€‚
    *   **å¯ç”¨è„šæœ¬è®¿é—®**: åœ¨ `DaVinci Resolve -> åå¥½è®¾ç½® -> ç³»ç»Ÿ -> General` ä¸­ï¼Œç¡®ä¿ "External scripting using" å·²è®¾ç½®ä¸º "Local"ã€‚
2.  **Python**: éœ€è¦ Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚
3.  **Node.js**: éœ€è¦ Node.js (å»ºè®®ä½¿ç”¨ LTS ç‰ˆæœ¬) å’Œ npmã€‚
4.  **Rust**: å¦‚æœéœ€è¦ä»æºç æ„å»ºæˆ–è¿›è¡Œ Tauri å¼€å‘ï¼Œéœ€è¦å®‰è£… Rust å·¥å…·é“¾ã€‚

### å®‰è£…ä¸è¿è¡Œ

1.  **å…‹éš†ä»“åº“**
    ```bash
    git clone https://your-repository-url/synapse.git
    cd synapse
    ```

2.  **å®‰è£…åç«¯ä¾èµ–**
    ```bash
    cd backend
    pip install -r requirements.txt
    cd ..
    ```

3.  **å®‰è£…å‰ç«¯ä¾èµ–**
    ```bash
    cd frontend/synapse
    npm install
    ```

4.  **ä»¥å¼€å‘æ¨¡å¼è¿è¡Œ**
    *ç¡®ä¿ DaVinci Resolve æ­£åœ¨è¿è¡Œï¼Œå¹¶å·²æ‰“å¼€ä¸€ä¸ªé¡¹ç›®ã€‚*
    ```bash
    # åœ¨ frontend/synapse ç›®å½•ä¸‹è¿è¡Œ
    npm run tauri dev
    ```
    æ­¤å‘½ä»¤å°†åŒæ—¶å¯åŠ¨ Vite å¼€å‘æœåŠ¡å™¨å’Œ Tauri åº”ç”¨çª—å£ï¼Œå¹¶è‡ªåŠ¨å¯åŠ¨ Python åç«¯ sidecarã€‚

### æ„å»ºåº”ç”¨

ä½ å¯ä»¥å°†åº”ç”¨æ‰“åŒ…ä¸ºé€‚ç”¨äºä½ å½“å‰æ“ä½œç³»ç»Ÿçš„ç‹¬ç«‹å¯æ‰§è¡Œæ–‡ä»¶ã€‚

```bash
# åœ¨ frontend/synapse ç›®å½•ä¸‹è¿è¡Œ
npm run tauri build
```

æ„å»ºå®Œæˆåï¼Œå¯æ‰§è¡Œæ–‡ä»¶å’Œå®‰è£…åŒ…å°†ä½äº `frontend/synapse/src-tauri/target/release/` ç›®å½•ä¸‹ã€‚

---

## ğŸ¤ è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼æ— è®ºæ˜¯æäº¤ Bug æŠ¥å‘Šã€åŠŸèƒ½å»ºè®®è¿˜æ˜¯ä»£ç  Pull Requestã€‚

1.  Fork æœ¬ä»“åº“
2.  åˆ›å»ºä½ çš„åŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3.  æäº¤ä½ çš„æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4.  å°†ä½ çš„åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ (`git push origin feature/AmazingFeature`)
5.  æ‰“å¼€ä¸€ä¸ª Pull Request

---

## ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT](https://choosealicense.com/licenses/mit/) è®¸å¯è¯ã€‚æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹ `LICENSE` æ–‡ä»¶ã€‚

---

## ğŸ™ è‡´è°¢

-   [Tauri Team](https://github.com/tauri-apps)
-   [Blackmagic Design](https://www.blackmagicdesign.com/) æä¾›çš„å¼ºå¤§è„šæœ¬ API
-   æ‰€æœ‰æœ¬é¡¹ç›®ä½¿ç”¨çš„å¼€æºåº“çš„ä½œè€…ä»¬